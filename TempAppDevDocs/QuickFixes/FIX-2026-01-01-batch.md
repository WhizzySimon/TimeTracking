# Batch Fix: UI Improvements 2026-01-01

**Date:** 2026-01-01
**Type:** [x] Bug / [x] Behavior Change / [x] Improvement

## Items

### 1. Day Page: Weekday Abbreviations

- **Current:** Navigation buttons show day numbers (e.g., "31", "2")
- **Desired:** Show 2-letter weekday abbreviations (Mo, Di, Mi, Do, Fr, Sa, So)

### 2. Settings: Delete Button Icon

- **Current:** Red "×" character for delete buttons
- **Desired:** Trash icon (SVG) like in TaskItem component

### 3. Settings: "Alle Tätigkeiten löschen" Menu Item

- **Current:** Menu has: Hinzufügen, Importieren, Exportieren
- **Desired:** Add 4th item "Alle Tätigkeiten löschen" with confirmation dialog
- **Behavior:** Delete all user categories (countsAsWorkTime=true) from local + cloud

### 4. Settings: "Alle Zeitdaten löschen" Button

- **Current:** Data section has: Exportieren, Stundenzettel, Importieren, Excel-Datei importieren
- **Desired:** Add red button "Alle Zeitdaten löschen" below Excel import
- **Behavior:** Delete all time entries from local + cloud with confirmation

### 5. DevFramework: UI Rules Update

- Dialog should close immediately after confirmation click (no delay)
- No jumping elements (reserve space for async-loaded content)

## Analysis

1. **Weekday abbreviations:** Already have `weekdayNames` array in day page. Just need to use it for nav button labels instead of `getDate()`.

2. **Trash icon:** TaskItem already has the SVG. Copy to settings page delete buttons.

3. **Delete all categories:**
   - Add menu item after "Exportieren"
   - Create `deleteAllUserCategories()` in operations.ts
   - Loop through categories, delete each with sync (reuse existing pattern)

4. **Delete all time entries:**
   - Add button in Daten section
   - Create `deleteAllTimeEntries()` in operations.ts
   - Loop through entries, delete each with sync

5. **DevFramework:** Update UI guidelines with new rules.

## Changes Made

- **src/routes/day/+page.svelte**: Changed nav button labels from day numbers to weekday abbreviations (Mo, Di, Mi, etc.)
- **src/routes/settings/+page.svelte**:
  - Replaced × with trash SVG icon for all delete buttons (employers, work time models, categories)
  - Added "Alle Tätigkeiten löschen" menu item in Tätigkeiten dropdown
  - Added "Alle Zeitdaten löschen" red button in Daten section
  - Added confirmation dialogs for both bulk delete operations
  - Added CSS styles for danger button and dropdown item
- **src/lib/storage/operations.ts**: Added `deleteAllUserCategories()` and `deleteAllTimeEntries()` functions with cloud sync
- **DevFramework/JustInTimeAgentRules/frontend-ux-standards.md**: Added new UI rules for immediate dialog close and no jumping elements

## QA Checklist

- [x] `npm run check` passes
- [x] FIX-1: Day nav buttons show Mo, Di, etc. ✓ Verified in browser
- [x] FIX-2: Settings delete buttons show trash icon ✓ Verified in browser
- [x] FIX-3: Tätigkeiten menu has "Alle Tätigkeiten löschen" option ✓ Verified in browser
- [x] FIX-4: Daten section has red "Alle Zeitdaten löschen" button ✓ Verified in browser
- [x] FIX-5: UI guidelines updated

## Status: VERIFIED
